# æ ¸å¿ƒæ¨¡å—æºç å‰–æ

## namesrv

### Namesrv å¯åŠ¨æµç¨‹

![Namesrv å¯åŠ¨æµç¨‹](./assets/ç¬¬äºŒé˜¶æ®µ/Namesrv å¯åŠ¨æµç¨‹.png)



### rocketmq-namesrv æœ€éœ€è¦æŒæ¡ä»€ä¹ˆï¼Ÿæ¥çœ‹çœ‹AIæ˜¯å¦‚ä½•æ€»ç»“çš„

åœ¨ RocketMQ 5.3.3 ä¸­å­¦ä¹  **Name Serverï¼ˆnamesrvï¼‰** æ¨¡å—æ—¶ï¼Œæœ€éœ€è¦æŒæ¡çš„æ ¸å¿ƒå†…å®¹åº”èšç„¦äºå…¶**æ¶æ„å®šä½ã€æ ¸å¿ƒèŒè´£ã€å…³é”®æœºåˆ¶ä¸é«˜å¯ç”¨è®¾è®¡**ã€‚Name Server æ˜¯ RocketMQ çš„â€œæ³¨å†Œä¸­å¿ƒâ€å’Œâ€œè·¯ç”±ä¸­æ¢â€ï¼Œè™½è½»é‡ä½†æå…¶å…³é”®ã€‚ä»¥ä¸‹æ˜¯å­¦ä¹ æ—¶å¿…é¡»æŒæ¡çš„è¦ç‚¹ï¼ŒæŒ‰ä¼˜å…ˆçº§æ’åºï¼š

------

#### âœ… ä¸€ã€æ ¸å¿ƒå®šä½ä¸ä½œç”¨ï¼ˆWhy Name Server?ï¼‰

##### å¿…é¡»ç†è§£ï¼š

- Name Server æ˜¯æ— çŠ¶æ€ã€å»ä¸­å¿ƒåŒ–çš„æ³¨å†Œä¸­å¿ƒ
  - ä¸å­˜å‚¨æ¶ˆæ¯ï¼Œåªç®¡ç† **Topic è·¯ç”±ä¿¡æ¯ï¼ˆBroker åœ°å€ã€é˜Ÿåˆ—åˆ†å¸ƒï¼‰**
  - Producer/Consumer é€šè¿‡ Name Server è·å– Broker åˆ—è¡¨ï¼Œä¹‹åç›´æ¥ä¸ Broker é€šä¿¡
- è§£è€¦ Producer/Consumer ä¸ Broker
  - æ–°å¢/ä¸‹çº¿ Broker æ—¶ï¼Œåªéœ€å‘ Name Server æ³¨å†Œ/æ³¨é”€ï¼Œå®¢æˆ·ç«¯è‡ªåŠ¨æ„ŸçŸ¥
- **å¯¹æ¯” ZooKeeper**ï¼šRocketMQ ä¸ºä½•ä¸ç”¨ ZKï¼Ÿ
  â†’ å›  Name Server æ›´è½»é‡ã€æ— é€‰ä¸¾å¼€é”€ã€æ»¡è¶³æœ€ç»ˆä¸€è‡´æ€§å³å¯

> ğŸ“Œ **ä¸€å¥è¯æ€»ç»“**ï¼šName Server = RocketMQ çš„â€œç”µè¯ç°¿â€ï¼Œå‘Šè¯‰å®¢æˆ·ç«¯â€œå»å“ªæ‰¾ Brokerâ€ã€‚

------

#### âœ… äºŒã€æ ¸å¿ƒå·¥ä½œæœºåˆ¶ï¼ˆHow It Works?ï¼‰

##### 1. **è·¯ç”±æ³¨å†Œï¼ˆRegisterï¼‰**

- **Broker å¯åŠ¨æ—¶**ï¼Œå‘**æ‰€æœ‰ Name Server** å‘é€ `REGISTER_BROKER` è¯·æ±‚ï¼ˆå« Topic é…ç½®ã€è¯»å†™é˜Ÿåˆ—æ•°ã€IP ç«¯å£ç­‰ï¼‰
- Name Server å°†è·¯ç”±ä¿¡æ¯å­˜å…¥å†…å­˜ `ConcurrentHashMap<String/* topic */, TopicRouteData>`
- **æ¯ 30 ç§’ Broker å¿ƒè·³ç»­æœŸ**ï¼ˆé˜²æ­¢ Name Server æ¸…ç†ï¼‰

##### 2. **è·¯ç”±å‘ç°ï¼ˆDiscoveryï¼‰**

- **Producer/Consumer å¯åŠ¨æ—¶**ï¼Œä» Name Server åˆ—è¡¨éšæœºé€‰ä¸€ä¸ªï¼Œæ‹‰å–å…¨é‡è·¯ç”±ä¿¡æ¯
- **æ¯ 30 ç§’å®šæ—¶æ›´æ–°**ï¼ˆ`DefaultMQPushConsumer` é»˜è®¤ 30sï¼Œå¯é…ï¼‰
- å®¢æˆ·ç«¯æœ¬åœ°ç¼“å­˜è·¯ç”±ï¼Œå‘é€æ¶ˆæ¯æ—¶ç›´æ¥æŸ¥æœ¬åœ°ç¼“å­˜

##### 3. **è·¯ç”±å‰”é™¤ï¼ˆCleanupï¼‰**

- Name Server å¯åŠ¨åå°çº¿ç¨‹ï¼ˆ`RouteInfoManager#scanNotActiveBroker`ï¼‰
- **è‹¥ Broker è¶…è¿‡ 120 ç§’æœªå¿ƒè·³**ï¼ˆ2 Ã— å¿ƒè·³é—´éš”ï¼‰ï¼Œåˆ™ä»è·¯ç”±è¡¨ç§»é™¤
- **æ³¨æ„**ï¼šName Server **ä¸ä¸»åŠ¨é€šçŸ¥**å®¢æˆ·ç«¯ï¼Œé å®¢æˆ·ç«¯ä¸‹æ¬¡æ‹‰å–æ—¶æ„ŸçŸ¥

> ğŸ”‘ **å…³é”®å‚æ•°**ï¼ˆ`NamesrvConfig`ï¼‰ï¼š
>
> - `scanNotActiveBrokerInterval` = 5sï¼ˆæ‰«æé—´éš”ï¼‰ï¼Œå‚è§æ–¹æ³•ï¼šorg.apache.rocketmq.namesrv.NamesrvController#startScheduleService
> - `brokerLiveCheckInterval` = 120sï¼ˆè¶…æ—¶é˜ˆå€¼ï¼‰ï¼Œå‚è§å¸¸é‡ï¼šorg.apache.rocketmq.namesrv.routeinfo.RouteInfoManager#DEFAULT_BROKER_CHANNEL_EXPIRED_TIME

------

#### âœ… ä¸‰ã€é«˜å¯ç”¨ä¸éƒ¨ç½²æ¨¡å¼ï¼ˆHA Designï¼‰

##### å¿…é¡»æŒæ¡ï¼š

- Name Server é›†ç¾¤æ— ä¸»ä»ã€æ— æ•°æ®åŒæ­¥

  - æ¯ä¸ªèŠ‚ç‚¹ç‹¬ç«‹å·¥ä½œï¼Œæ•°æ®æœ€ç»ˆä¸€è‡´ï¼ˆé  Broker å‘æ‰€æœ‰èŠ‚ç‚¹æ³¨å†Œï¼‰

- å®¢æˆ·ç«¯é…ç½®å¤šä¸ª Name Server åœ°å€ï¼ˆé€—å·åˆ†éš”ï¼‰

  ```java
  producer.setNamesrvAddr("ns1:9876;ns2:9876;ns3:9876");
  ```

- å®¹é”™æœºåˆ¶ï¼š

  - è‹¥æŸä¸ª Name Server ä¸å¯ç”¨ï¼Œå®¢æˆ·ç«¯è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ª
  - **åªè¦æœ‰ä¸€ä¸ª Name Server å¯ç”¨ï¼Œé›†ç¾¤å°±å¯ç”¨**

> âš ï¸ **é‡è¦é™åˆ¶**ï¼š
>  Name Server **ä¸ä¿è¯å¼ºä¸€è‡´æ€§**ï¼Broker æ³¨å†Œå¯èƒ½å› ç½‘ç»œå»¶è¿Ÿå¯¼è‡´çŸ­æš‚ä¸ä¸€è‡´ï¼Œä½† RocketMQ é€šè¿‡å®¢æˆ·ç«¯é‡è¯•+å¤š Name Server é…ç½®å®¹å¿æ­¤é—®é¢˜ã€‚

------

#### âœ… å››ã€å…³é”®æºç æ¨¡å—ï¼ˆRocketMQ 5.3.3ï¼‰

å­¦ä¹ æ—¶é‡ç‚¹é˜…è¯»ä»¥ä¸‹åŒ…ï¼ˆ`rocketmq-namesrv` æ¨¡å—ï¼‰ï¼š

| ç±»/åŒ…                                                        | ä½œç”¨         | å­¦ä¹ é‡ç‚¹                                                |
| ------------------------------------------------------------ | ------------ | ------------------------------------------------------- |
| `org.apache.rocketmq.namesrv.NamesrvStartup`                 | å¯åŠ¨å…¥å£     | åˆå§‹åŒ– `NamesrvController`                              |
| `org.apache.rocketmq.namesrv.routeinfo.RouteInfoManager`     | **æ ¸å¿ƒç±»ï¼** | è·¯ç”±æ³¨å†Œ/æŸ¥è¯¢/å‰”é™¤é€»è¾‘                                  |
| `org.apache.rocketmq.namesrv.processor.DefaultRequestProcessor` | è¯·æ±‚å¤„ç†å™¨   | å¤„ç† `GET_ROUTEINTO_BY_TOPIC`, `REGISTER_BROKER` ç­‰å‘½ä»¤ |
| `org.apache.rocketmq.common.namesrv.NamesrvConfig`           | é…ç½®ç±»       | è¶…æ—¶æ—¶é—´ã€å­˜å‚¨è·¯å¾„ç­‰                                    |

> ğŸ’¡ **è°ƒè¯•å»ºè®®**ï¼š
>  åœ¨ `org.apache.rocketmq.namesrv.routeinfo.RouteInfoManager#registerBroker` å’Œ `org.apache.rocketmq.namesrv.routeinfo.RouteInfoManager#scanNotActiveBroker` æ‰“æ–­ç‚¹ï¼Œè§‚å¯Ÿè·¯ç”±æ³¨å†Œä¸æ¸…ç†è¿‡ç¨‹ã€‚

------

#### âœ… äº”ã€å¸¸è§é—®é¢˜ä¸æœ€ä½³å®è·µ

##### å¿…é¡»çŸ¥é“çš„å‘ï¼š

1. **Name Server å®•æœºå½±å“ï¼Ÿ**
   - å·²è¿è¡Œçš„ Producer/Consumer **ä¸å—å½±å“**ï¼ˆå› æœ¬åœ°æœ‰ç¼“å­˜ï¼‰
   - **æ–°å¯åŠ¨çš„å®¢æˆ·ç«¯æ— æ³•è·å–è·¯ç”±** â†’ ä¸šåŠ¡ä¸­æ–­ â†’ **ç»“è®ºï¼šName Server è‡³å°‘éƒ¨ç½² 2 èŠ‚ç‚¹**
2. **ä¸ºä»€ä¹ˆ Broker è¦å‘æ‰€æœ‰ Name Server æ³¨å†Œï¼Ÿ**
    â†’ é¿å…å•ç‚¹æ•…éšœï¼Œä¿è¯æ¯ä¸ª Name Server æ•°æ®å®Œæ•´
3. **è·¯ç”±æ›´æ–°å»¶è¿Ÿï¼Ÿ**
   - æœ€å¤§å»¶è¿Ÿ = å®¢æˆ·ç«¯æ‹‰å–é—´éš”ï¼ˆé»˜è®¤ 30sï¼‰ + Name Server å‰”é™¤å»¶è¿Ÿï¼ˆ120sï¼‰
     â†’ æ•æ„Ÿåœºæ™¯å¯è°ƒå° `pollNameServerInterval`
4. **Name Server å†…å­˜å ç”¨ï¼Ÿ**
   - è·¯ç”±ä¿¡æ¯å…¨åœ¨å†…å­˜ï¼Œ10ä¸‡ Topic çº¦å  100~200MB
     â†’ ç›‘æ§ `jstat -gc` é˜²æ­¢ OOM

------

#### âœ… å…­ã€ä¸æ—§ç‰ˆæœ¬å·®å¼‚ï¼ˆ5.x vs 4.xï¼‰

RocketMQ 5.x å¯¹ Name Server **æ”¹åŠ¨æå°**ï¼ˆå› å…¶è®¾è®¡å·²å¾ˆæˆç†Ÿï¼‰ï¼Œä½†éœ€æ³¨æ„ï¼š

- **5.x å¼ºåŒ–äº†å¯è§‚æµ‹æ€§**ï¼šå¢åŠ  Metrics æŒ‡æ ‡ï¼ˆå¦‚ `route_info_count`ï¼‰
- **é…ç½®ç®€åŒ–**ï¼šç§»é™¤éƒ¨åˆ†å†—ä½™å‚æ•°
- **ä¸ Proxy æ¶æ„ååŒ**ï¼šåœ¨ 5.x çš„â€œé€»è¾‘éš”ç¦»â€æ¶æ„ä¸­ï¼ŒName Server ä»è´Ÿè´£ç‰©ç† Broker è·¯ç”±

> ğŸ“Œ **å­¦ä¹ å»ºè®®**ï¼šName Server æœºåˆ¶åœ¨ 4.x/5.x åŸºæœ¬ä¸€è‡´ï¼ŒæŒæ¡ 5.3.3 å³è¦†ç›–ä¸»æµç‰ˆæœ¬ã€‚

------

#### âœ… æ€»ç»“ï¼šæœ€éœ€è¦æŒæ¡çš„ 5 ä¸ªæ ¸å¿ƒç‚¹

| ä¼˜å…ˆçº§  | å†…å®¹                                                         | ä¸ºä»€ä¹ˆé‡è¦               |
| ------- | ------------------------------------------------------------ | ------------------------ |
| ğŸ”´ **1** | **Name Server æ˜¯æ— çŠ¶æ€æ³¨å†Œä¸­å¿ƒï¼Œåªç®¡è·¯ç”±ä¸ç®¡æ¶ˆæ¯**           | ç†è§£ RocketMQ æ¶æ„åŸºçŸ³   |
| ğŸ”´ **2** | **Broker å‘æ‰€æœ‰ Name Server æ³¨å†Œï¼Œå®¢æˆ·ç«¯ä»ä»»ä¸€èŠ‚ç‚¹æ‹‰å–è·¯ç”±** | æŒæ¡é«˜å¯ç”¨å®ç°åŸç†       |
| ğŸ”´ **3** | **è·¯ç”±æ³¨å†Œï¼ˆ30s å¿ƒè·³ï¼‰ã€å‰”é™¤ï¼ˆ120s è¶…æ—¶ï¼‰ã€å®¢æˆ·ç«¯æ‹‰å–ï¼ˆ30sï¼‰ä¸‰å¤§å‘¨æœŸ** | è§£é‡Šç”Ÿäº§ç¯å¢ƒè·¯ç”±å»¶è¿Ÿé—®é¢˜ |
| ğŸŸ  **4** | **Name Server å®•æœºä¸å½±å“å·²è¿è¡Œå®¢æˆ·ç«¯ï¼Œä½†é˜»å¡æ–°å®¢æˆ·ç«¯å¯åŠ¨**   | è¿ç»´æ’éšœå…³é”®çŸ¥è¯†         |
| ğŸŸ¢ **5** | **æ ¸å¿ƒç±» `RouteInfoManager` çš„æ³¨å†Œ/æŸ¥è¯¢/æ¸…ç†é€»è¾‘**           | æ·±å…¥æºç å¿…å¤‡             |

------

> ğŸ’¡ **ç»ˆæå»ºè®®**ï¼š
> **åŠ¨æ‰‹å®éªŒ > æ­»è®°ç†è®º**ï¼
>
> 1. å¯åŠ¨ 2 ä¸ª Name Server + 1 Broker
>
> 2. ç”¨ `mqadmin topicList -n 127.0.0.1:9876` æŸ¥çœ‹è·¯ç”±
>
>    ```bat
>    :: æ‰“å¼€cmd
>    :: è¿›å…¥binç›®å½•
>    cd E:\DiGuaPao\Github\apache\rocketmq\rocketmq-all-5.3.3-bin-release\bin
>    :: ä¸´æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå½“å‰å‘½ä»¤è¡Œæœ‰æ•ˆï¼‰
>    set ROCKETMQ_HOME=E:\DiGuaPao\Github\apache\rocketmq\rocketmq-all-5.3.3-bin-release
>    set JAVA_HOME=E:\soft\jdk1.8\jdk1.8.0_221
>    :: æŸ¥çœ‹é›†ç¾¤åˆ—è¡¨
>    mqadmin.cmd clusterList -n localhost:9876;localhost:19876;localhost:29876
>    :: æŸ¥çœ‹è·¯ç”±
>    mqadmin.cmd topicList -n localhost:9876;localhost:19876;localhost:29876
>    ```
>
> 3. åœæ‰ä¸€ä¸ª Name Serverï¼Œè§‚å¯Ÿå®¢æˆ·ç«¯æ˜¯å¦æ­£å¸¸
>
> 4. ä¿®æ”¹ Broker é…ç½®åé‡å¯ï¼ŒéªŒè¯è·¯ç”±æ›´æ–°å»¶è¿Ÿ
>
> é€šè¿‡å®è·µï¼Œä½ ä¼šçœŸæ­£æŒæ¡ Name Server çš„â€œçµé­‚â€ã€‚





## è®¿é—®æ§åˆ¶2.0

è¿™é‡Œæˆ‘ä»¬é‡‡ç”¨å®˜æ–¹æ¨èçš„å­˜ç®—åˆ†ç¦»æ¶æ„è¿›è¡Œé…ç½®

### brokeré…ç½®

#### broker-a.conf

```conf
# Licensed to the Apache Software Foundation (ASF) under one or more
# contributor license agreements.  See the NOTICE file distributed with
# this work for additional information regarding copyright ownership.
# The ASF licenses this file to You under the Apache License, Version 2.0
# (the "License"); you may not use this file except in compliance with
# the License.  You may obtain a copy of the License at
#
#     http://www.apache.org/licenses/LICENSE-2.0
#
#  Unless required by applicable law or agreed to in writing, software
#  distributed under the License is distributed on an "AS IS" BASIS,
#  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
#  See the License for the specific language governing permissions and
#  limitations under the License.

#namesrvAddrå¤šä¸ªåœ°å€é‡‡ç”¨è‹±æ–‡åˆ†å·;éš”å¼€
namesrvAddr=localhost:9876;localhost:19876;localhost:29876

brokerClusterName = DefaultCluster
brokerName = broker-a
# Broker ID (0è¡¨ç¤ºMaster)
brokerId=0
deleteWhen = 04
fileReservedTime = 48
brokerRole = ASYNC_MASTER
flushDiskType = ASYNC_FLUSH

# è‡ªåŠ¨åˆ›å»ºä¸»é¢˜å¼€å…³ï¼ˆç¡®ä¿å¼€å¯ï¼‰
autoCreateTopicEnable=true
autoCreateSubscriptionGroup=true

# è®¿é—®æ§åˆ¶å¼€å¯(å­˜ç®—åˆ†ç¦»æ¶æ„)
aclEnable=true
globalWhiteRemoteAddresses=127.0.0.1

# å¯ç”¨è®¤è¯ï¼ŒBrokeré…ç½®(å­˜ç®—åˆ†ç¦»æ¶æ„)
# Brokerä»…ä½œä¸ºå…ƒæ•°æ®æä¾›è€…
authenticationEnabled = false
authorizationEnabled = false
authenticationMetadataProvider = org.apache.rocketmq.auth.authentication.provider.LocalAuthenticationMetadataProvider
authorizationMetadataProvider = org.apache.rocketmq.auth.authorization.provider.LocalAuthorizationMetadataProvider
initAuthenticationUser = {"username":"rocketmq","password":"12345678"}

# Brokerç›‘å¬åœ°å€å’Œç«¯å£
listenPort=10911
brokerIP1=127.0.0.1

# å­˜å‚¨è·¯å¾„ï¼ˆç¡®ä¿ç›®å½•å­˜åœ¨ï¼‰
storePathRootDir=E:/DiGuaPao/Github/apache/rocketmq/home/store-a
storePathCommitLog=E:/DiGuaPao/Github/apache/rocketmq/home/store-a/commitlog
storePathConsumeQueue=E:/DiGuaPao/Github/apache/rocketmq/home/store-a/consumequeue
```

### proxyé…ç½®

#### rmq-proxy-18080.json

```json
{
  "é›†ç¾¤é…ç½®": "proxyMode=Localæ—¶ï¼Œproxyä¼šå†…åµŒä¸€ä¸ªbrokerï¼Œå› æ­¤æ— éœ€å•ç‹¬å†éƒ¨ç½²brokeräº†",
  "proxyMode": "Cluster",
  "clusterName": "DefaultCluster",
  "ç‰¹åˆ«æ³¨æ„": "namesrvAddrå¤šä¸ªåœ°å€é‡‡ç”¨è‹±æ–‡åˆ†å·;éš”å¼€",
  "namesrvAddr": "localhost:9876;localhost:19876;localhost:29876",
  "ä¸»è¦ç«¯å£é…ç½®": "",
  "gRPC æœåŠ¡ç«¯å£": "",
  "grpcServerPort": 18081,
  "Remoting æœåŠ¡ç«¯å£": "",
  "remotingServerPort": 18080,
  "HTTP æœåŠ¡ç«¯å£ï¼ˆå¦‚æœå¯ç”¨ï¼‰": "",
  "httpServerPort": 18082,
  "Admin ç«¯å£ï¼ˆç®¡ç†æ¥å£ï¼‰": "",
  "adminPort": 18083,
  "ç½‘ç»œé…ç½®": "",
  "remotingListenPort": 18080,
  "çº¿ç¨‹é…ç½®": "",
  "grpcThreadPoolNums": 16,
  "grpcThreadPoolQueueCapacity": 10000,
  "è¶…æ—¶é…ç½®": "",
  "channelExpiredTimeout": 60000,
  "heartbeatTimeoutMills": 30000,
  "æ¶ˆæ¯å¤§å°é™åˆ¶": "",
  "maxMessageSize": 65536,
  "haProxyProtocolEnabled": false,
  "logbackConfigurationFile": "E:/DiGuaPao/Github/apache/rocketmq/proxy/src/main/resources/rmq.proxy.logback.xml",
  "å¯ç”¨è®¤è¯-start": "",
  "authenticationEnabled": true,
  "authenticationProvider": "org.apache.rocketmq.auth.authentication.provider.DefaultAuthenticationProvider",
  "authenticationMetadataProvider": "org.apache.rocketmq.proxy.auth.ProxyAuthenticationMetadataProvider",
  "authenticationStrategy": "org.apache.rocketmq.auth.authentication.strategy.StatefulAuthenticationStrategy",
  "authorizationEnabled": true,
  "authorizationProvider": "org.apache.rocketmq.auth.authorization.provider.DefaultAuthorizationProvider",
  "authorizationMetadataProvider": "org.apache.rocketmq.proxy.auth.ProxyAuthorizationMetadataProvider",
  "authorizationStrategy": "org.apache.rocketmq.auth.authorization.strategy.StatefulAuthorizationStrategy",
  "userCacheMaxNum": 5000,
  "userCacheExpiredSecond": 3600,
  "userCacheRefreshSecond": 300,
  "aclCacheMaxNum": 5000,
  "aclCacheExpiredSecond": 3600,
  "aclCacheRefreshSecond": 300,
  "statefulAuthenticationCacheMaxNum": 20000,
  "statefulAuthenticationCacheExpiredSecond": 60,
  "statefulAuthorizationCacheMaxNum": 20000,
  "statefulAuthorizationCacheExpiredSecond": 60,
  "å¯ç”¨è®¤è¯-end": ""
}
```



### mqadminé…ç½®

#### conf/tools.yml

```
accessKey: rocketmq
secretKey: 12345678
```



### åˆ›å»ºä¸šåŠ¡ç”¨æˆ·å’Œæˆæƒ

```bat
:: æ‰“å¼€cmd
:: è¿›å…¥binç›®å½•
cd E:\DiGuaPao\Github\apache\rocketmq\rocketmq-all-5.3.3-bin-release\bin
:: ä¸´æ—¶è®¾ç½®ç¯å¢ƒå˜é‡ï¼ˆå½“å‰å‘½ä»¤è¡Œæœ‰æ•ˆï¼‰
set ROCKETMQ_HOME=E:\DiGuaPao\Github\apache\rocketmq\rocketmq-all-5.3.3-bin-release
set JAVA_HOME=E:\soft\jdk1.8\jdk1.8.0_221

:: åˆ›å»ºä¸šåŠ¡ç”¨æˆ·å’Œæˆæƒ
:: åˆ›å»ºç”Ÿäº§è€…ç”¨æˆ·
mqadmin.cmd createUser -n 127.0.0.1:9876 -c DefaultCluster -u producer_user -p producer123 -t Normal

:: æˆäºˆTopicå‘é€ã€è®¢é˜…æƒé™
mqadmin.cmd createAcl -n localhost:9876;localhost:19876;localhost:29876 -c DefaultCluster -s User:producer_user -r Topic:examples-rocketmq-topic -a Pub,Sub -d Allow
```



### éªŒè¯é…ç½®

